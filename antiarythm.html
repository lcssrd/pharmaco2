<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anti-arythmiques & Digitaliques - IFSI</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Chart.js for radar charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom styles to complement Tailwind */
        body {
            font-family: 'Inter', sans-serif;
        }
        .page {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Styles for selected quiz options */
        .qcm-option.correct {
            background-image: linear-gradient(to right, #4ade80, #16a34a); /* from-green-400 to-green-600 */
            color: white;
            border-color: #15803d; /* green-700 */
            font-weight: 600;
        }
        .qcm-option.incorrect {
            background-image: linear-gradient(to right, #f87171, #dc2626); /* from-red-400 to-red-600 */
            color: white;
            border-color: #b91c1c; /* red-700 */
            font-weight: 600;
        }
        .qcm-option:disabled {
            cursor: not-allowed;
        }
        .qcm-option:disabled:not(.correct):not(.incorrect) {
            color: #475569; /* slate-600 */
            background-color: #f1f5f9; /* slate-100 */
            opacity: 0.7;
        }
    </style>
</head>
<body class="bg-slate-100 p-2 sm:p-4 md:p-8">
    <!-- Main container -->
    <div id="app" class="max-w-6xl mx-auto bg-white min-h-screen shadow-2xl rounded-xl overflow-hidden">
                
        <!-- Header -->
        <header id="header" class="bg-slate-800 text-white p-6 md:p-8 sticky top-0 z-50">
            <div class="flex items-center justify-between">
                <h1 class="text-3xl sm:text-4xl md:text-5xl font-black tracking-tight bg-gradient-to-r from-red-500 to-red-800 bg-clip-text text-transparent pb-2">Anti-arythmiques & Digitaliques</h1>
                <div class="hidden md:flex text-right font-bold text-slate-300 text-sm">
                    <p><span class="bg-gradient-to-r from-red-500 to-red-800 bg-clip-text text-transparent">Lucas S√©raudie</span> - 2025</p>
                </div>
            </div>
        </header>

        <!-- Top Navigation Bar -->
        <nav id="navbar" class="bg-white sticky z-10 p-4 shadow-md">
             <div class="p-1.5 bg-slate-200/60 rounded-xl grid grid-cols-4 sm:grid-cols-4 md:grid-cols-7 gap-2">
                <!-- MODIFICATION DU BOUTON CLASSE I : Utilisation des couleurs rouges/roses -->
                <button onclick="showPage('classe1')" class="nav-btn w-full py-3 px-2 rounded-lg text-slate-800 font-semibold transition-all duration-300 text-xs sm:text-sm hover:bg-rose-100 hover:text-rose-800">Stab. Membrane</button>
                <button onclick="showPage('classe2')" class="nav-btn w-full py-3 px-2 rounded-lg text-slate-800 font-semibold transition-all duration-300 text-xs sm:text-sm hover:bg-purple-100 hover:text-purple-800">B√™ta-bloquants</button>
                <button onclick="showPage('classe3')" class="nav-btn w-full py-3 px-2 rounded-lg text-slate-800 font-semibold transition-all duration-300 text-xs sm:text-sm hover:bg-red-100 hover:text-red-800">Inhib. Potassiques</button>
                <button onclick="showPage('classe4')" class="nav-btn w-full py-3 px-2 rounded-lg text-slate-800 font-semibold transition-all duration-300 text-xs sm:text-sm hover:bg-green-100 hover:text-green-800">Inhib. Calciques</button>
                <button onclick="showPage('digitaliques')" class="nav-btn w-full py-3 px-2 rounded-lg text-slate-800 font-semibold transition-all duration-300 text-xs sm:text-sm hover:bg-amber-100 hover:text-amber-800">Digitaliques</button>
                <button onclick="showPage('quiz')" class="nav-btn w-full py-3 px-2 rounded-lg text-slate-800 font-semibold transition-all duration-300 text-xs sm:text-sm hover:bg-slate-300 hover:text-slate-800">Quiz</button>
                <button onclick="showPage('synthese')" class="nav-btn w-full py-3 px-2 rounded-lg text-slate-800 font-semibold transition-all duration-300 text-xs sm:text-sm hover:bg-gray-200 hover:text-gray-800">Synth√®se</button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main id="main-content" class="p-4 sm:p-6 md:p-8">

            <!-- Classe I Page - COULEURS MODIFI√âES (sky- √† rose-/red-) -->
            <div id="classe1" class="page">
                <h2 class="text-2xl md:text-3xl font-bold text-red-600">Classe I : Stabilisants de membrane</h2>
                <div class="space-y-4 mt-4">
                    <div class="bg-rose-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-red-800">‚öôÔ∏è M√©canisme d'action g√©n√©ral</h3>
                        <p class="text-red-700 text-sm">Bloquent les canaux sodiques, ce qui ralentit la d√©polarisation des cellules cardiaques. Ils stabilisent la membrane cellulaire pour r√©duire l'excitabilit√© cardiaque.</p>
                    </div>
                    
                    <!-- CLASSE Ia -->
                    <div class="bg-red-100 p-4 rounded-lg">
                    <h3 class="text-xl font-bold text-red-700 pt-4">Sous-classe Ia (ex: Serecor¬Æ, Rythmodan¬Æ)</h3>
                    <div class="bg-red-100 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-800">üî¨ Indications & Effets</h4>
                        <p class="text-red-700 text-sm">Traitement des troubles supraventriculaires. Acc√©l√®rent le rythme et facilitent la conduction auriculo-ventriculaire.</p>
                    </div>
                        <div class="p-4 bg-red-200 border border-red-400 rounded-lg">
                        <h4 class="font-semibold text-red-800">‚ö†Ô∏è Points de vigilance</h4>
                        <ul class="list-disc list-inside text-red-700 text-sm space-y-1">
                            <li><strong>Pouvoir arythmog√®ne important :</strong> Risque de torsades de pointes.</li>
                            <li><strong>Surveillance de la kali√©mie :</strong> Une hypokali√©mie majore les risques.</li>
                            <li><strong>Hypersensibilit√© :</strong> R√©actions imm√©diates (hypotension) ou retard√©es (cinchonisme).</li>
                            <li><strong>Effets atropiniques (Disopyramide) :</strong> Bouche s√®che, constipation, r√©tention urinaire.</li>
                        </ul>
                    </div>
                    </div>
                    
                    <!-- CLASSE Ib -->
                    <div class="bg-red-100 p-4 rounded-lg">
                    <h3 class="text-xl font-bold text-red-700 pt-4">Sous-classe Ib (ex: Xylocard¬Æ, Dilantin¬Æ)</h3>
                     <div class="bg-red-100 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-800">üî¨ Indications & Effets</h4>
                        <p class="text-red-700 text-sm">Traitement des troubles du rythme ventriculaires graves, notamment lors d'intoxication digitalique (Ph√©nyto√Øne).</p>
                    </div>
                        <div class="p-4 bg-red-200 border border-red-400 rounded-lg">
                        <h4 class="font-semibold text-red-800">‚ö†Ô∏è Points de vigilance</h4>
                        <ul class="list-disc list-inside text-red-700 text-sm space-y-1">
                            <li><strong>Administration parent√©rale stricte (Lidoca√Øne)</strong> en raison du premier passage h√©patique.</li>
                            <li><strong>Signes de toxicit√© :</strong> neurotoxicit√© (agitation, confusion, convulsions) et troubles cardiovasculaires (hypotension, troubles du rythme).</li>
                        </ul>
                    </div>
                    </div>

                    <!-- CLASSE Ic -->
                    <div class="bg-red-100 p-4 rounded-lg">
                    <h3 class="text-xl font-bold text-red-700 pt-4">Sous-classe Ic (ex: Fleca√Øne¬Æ, Rythmol¬Æ)</h3>
                    <div class="bg-red-100 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-800">üî¨ Indications & Effets</h4>
                        <p class="text-red-700 text-sm">Pr√©vention et traitement des troubles supraventriculaires. Ralentissent fortement la conduction.</p>
                    </div>
                        <div class="p-4 bg-red-200 border border-red-400 rounded-lg">
                        <h4 class="font-semibold text-red-800">‚ö†Ô∏è Points de vigilance</h4>
                        <ul class="list-disc list-inside text-red-700 text-sm space-y-1">
                            <li><strong>Effets pro-arythmog√®nes :</strong> peuvent aggraver des troubles du rythme.</li>
                            <li><strong>Effets cardiaques :</strong> Pouss√©es d'insuffisance cardiaque, ralentissement de la conduction.</li>
                            <li><strong>Incompatibilit√© (Fl√©ca√Ønide IV) :</strong> Ne pas diluer dans du NaCl, utiliser du s√©rum glucos√©.</li>
                        </ul>
                    </div>
                    </div>
                </div>
            </div>
            
            <!-- Classe II Page -->
            <div id="classe2" class="page hidden">
                <h2 class="text-2xl md:text-3xl font-bold text-purple-600">Classe II : B√™ta-bloquants</h2>
                <div class="space-y-4 mt-4">
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-purple-800 mb-2">üíä Exemples</h3>
                        <p class="text-purple-700 text-sm">Ac√©butolol, At√©nolol, M√©toprolol (VO), Esmolol, Propranolol (IV)...</p>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-purple-800">‚öôÔ∏è M√©canisme d'action</h3>
                        <p class="text-purple-700 text-sm">Bloquent les r√©cepteurs b√™ta-adr√©nergiques, ce qui diminue la stimulation sympathique du c≈ìur. Ils r√©duisent la fr√©quence cardiaque, la force de contraction et la vitesse de conduction.</p>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-purple-800">üî¨ Indications</h3>
                        <p class="text-purple-700 text-sm">Ralentissement de la fr√©quence ventriculaire lors de fibrillation auriculaire. Pr√©vention des arythmies ventriculaires apr√®s un infarctus du myocarde.</p>
                    </div>
                    <div class="bg-purple-100 p-4 rounded-lg border-l-4 border-purple-400">
                        <h3 class="font-semibold text-purple-800">‚ö†Ô∏è Points de vigilance & Contre-indications</h3>
                        <ul class="list-disc list-inside text-purple-700 text-sm space-y-1">
                            <li><strong>Contre-indications :</strong> Bradycardie/hypotension s√©v√®re, BAV, insuffisance cardiaque d√©compens√©e, asthme et BPCO.</li>
                            <li><strong>Effets ind√©sirables :</strong> Bradycardie, fatigue, troubles digestifs, impuissance, masquage des signes d'hypoglyc√©mie chez le diab√©tique.</li>
                            <li><strong>Ne JAMAIS interrompre brutalement :</strong> Risque d'effet rebond (tachycardie, HTA).</li>
                            <li><strong>Surveillance :</strong> Pouls, tension art√©rielle.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Classe III Page -->
            <div id="classe3" class="page hidden">
                <h2 class="text-2xl md:text-3xl font-bold text-red-600">Classe III : Inhibiteurs des canaux potassiques</h2>
                 <div class="space-y-4 mt-4">
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-red-800 mb-2">üíä Sp√©cialit√©s</h3>
                        <p class="text-red-700 text-sm">Amiodarone (Cordarone¬Æ), Sotalol (Sotalex¬Æ)</p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-red-800">‚öôÔ∏è M√©canisme d'action</h3>
                        <p class="text-red-700 text-sm">Allongent la dur√©e du potentiel d'action et la p√©riode r√©fractaire en bloquant les canaux potassiques. Cela ralentit la fr√©quence cardiaque et diminue l'excitabilit√© myocardique. Allongent l'espace QT.</p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-red-800">üî¨ Indications</h3>
                        <p class="text-red-700 text-sm">Troubles du rythme graves, ventriculaires et supraventriculaires (ex: fibrillation ventriculaire).</p>
                    </div>
                    <div class="bg-red-100 p-4 rounded-lg border-l-4 border-red-400">
                        <h3 class="font-semibold text-red-800">‚ö†Ô∏è Points de vigilance pour l'Amiodarone</h3>
                        <ul class="list-disc list-inside text-red-700 text-sm space-y-1">
                            <li><strong>Effet pro-arythmog√®ne :</strong> Risque majeur de torsade de pointe.</li>
                            <li><strong>Troubles thyro√Ødiens :</strong> Hypo ou hyperthyro√Ødie (bilan TSH avant et pendant le ttt).</li>
                            <li><strong>Toxicit√© pulmonaire :</strong> Pneumopathies.</li>
                            <li><strong>Toxicit√© oculaire :</strong> Micro-d√©p√¥ts corn√©ens (vision de halos color√©s).</li>
                            <li><strong>Cutan√©s :</strong> Photosensibilisation (protection solaire indispensable).</li>
                            <li><strong>Administration IV :</strong> Uniquement dans du s√©rum glucos√©, jamais en IVD (sauf ACR).</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Classe IV Page -->
            <div id="classe4" class="page hidden">
                <h2 class="text-2xl md:text-3xl font-bold text-green-600">Classe IV : Inhibiteurs calciques</h2>
                 <div class="space-y-4 mt-4">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-green-800 mb-2">üíä Sp√©cialit√©s (√† tropisme cardiaque)</h3>
                        <p class="text-green-700 text-sm">V√©rapamil (Isoptine¬Æ), Diltiazem (Tildiem¬Æ)</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-green-800">‚öôÔ∏è M√©canisme d'action</h3>
                        <p class="text-green-700 text-sm">Bloquent l'entr√©e du calcium dans les cellules cardiaques, ce qui diminue la force de contraction (inotropes n√©gatifs), ralentit la fr√©quence cardiaque (chronotropes n√©gatifs) et ralentit la conduction auriculo-ventriculaire.</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-green-800">üî¨ Indications</h3>
                        <p class="text-green-700 text-sm">Traitement et pr√©vention des tachycardies supraventriculaires. √âgalement utilis√©s dans l'HTA et l'angor.</p>
                    </div>
                    <div class="bg-green-100 p-4 rounded-lg border-l-4 border-green-400">
                        <h3 class="font-semibold text-green-800">‚ö†Ô∏è Points de vigilance</h3>
                        <ul class="list-disc list-inside text-green-700 text-sm space-y-1">
                             <li><strong>Effets cardiaques :</strong> Bradycardie, hypotension, troubles de la conduction (BAV).</li>
                             <li><strong>Vasodilatation :</strong> C√©phal√©es, bouff√©es de chaleur, ≈ìd√®mes des membres inf√©rieurs.</li>
                             <li><strong>Troubles digestifs :</strong> Constipation marqu√©e avec le V√©rapamil.</li>
                             <li><strong>Hyperplasie gingivale :</strong> Importance d'une bonne hygi√®ne bucco-dentaire.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Digitaliques Page -->
            <div id="digitaliques" class="page hidden">
                <h2 class="text-2xl md:text-3xl font-bold text-amber-600">Les Digitaliques</h2>
                <div class="space-y-4 mt-4">
                     <div class="bg-amber-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-amber-800 mb-2">üíä Sp√©cialit√©</h3>
                        <p class="text-amber-700 text-sm">Digoxine (Digoxine¬Æ, Hemigoxine¬Æ)</p>
                    </div>
                    <div class="bg-amber-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-amber-800">‚öôÔ∏è M√©canisme d'action - La r√®gle des 3 R</h3>
                        <ul class="list-disc list-inside text-amber-700 text-sm space-y-1">
                            <li><strong>Renforce :</strong> Augmente la force de contraction du c≈ìur (inotropes positifs).</li>
                            <li><strong>Ralentit :</strong> Diminue la fr√©quence cardiaque (chronotropes n√©gatifs).</li>
                            <li><strong>R√©gularise :</strong> Ralentit la conduction dans le n≈ìud auriculo-ventriculaire.</li>
                        </ul>
                    </div>
                    <div class="bg-amber-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-amber-800">üî¨ Indications</h3>
                        <p class="text-amber-700 text-sm">Insuffisance cardiaque, troubles du rythme supra-ventriculaires (fibrillation auriculaire).</p>
                    </div>
                    <div class="bg-amber-100 p-4 rounded-lg border-l-4 border-amber-400">
                        <h3 class="font-semibold text-amber-800">‚ö†Ô∏è Points de vigilance : Marge th√©rapeutique √©troite !</h3>
                        <ul class="list-disc list-inside text-amber-700 text-sm space-y-1">
                            <li><strong>Risque de surdosage :</strong> L'intervalle entre la dose efficace et la dose toxique est tr√®s faible.</li>
                            <li><strong>Signes d'intoxication :</strong> troubles digestifs (naus√©es, vomissements), troubles de la vision des couleurs (dyschromatopsie), troubles psy (confusion).</li>
                            <li><strong>Surveillance biologique :</strong> Kali√©mie (l'hypokali√©mie majore la toxicit√©), digoxin√©mie (apr√®s 6 jours de traitement).</li>
                            <li><strong>ECG :</strong> L'aspect "en cupule" du segment ST est un signe d'impr√©gnation (normal), pas de surdosage.</li>
                            <li><strong>Contre-indications :</strong> Calcium IV, Millepertuis.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Quiz Page -->
            <div id="quiz" class="page hidden">
                <div class="bg-gradient-to-br from-slate-50 to-gray-100 p-6 sm:p-8 md:p-10 rounded-2xl shadow-inner">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800 mb-2">Quiz Interactif</h2>
                    <p class="text-slate-600 mb-8">Testez vos connaissances sur les anti-arythmiques et les digitaliques.</p>
                    
                    <div id="qcm-container" class="space-y-8">
                        <!-- Les questions du quiz seront inject√©es ici par le JavaScript -->
                    </div>

                    <div id="quiz-footer" class="mt-10 pt-6 border-t-2 border-slate-200 flex justify-between items-center">
                        <p id="quiz-score" class="text-xl md:text-2xl font-bold text-slate-800"></p>
                        <button onclick="resetQuiz()" id="reset-button" class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-200 transform opacity-0 pointer-events-none">
                            Recommencer
                        </button>
                    </div>
                </div>
            </div>

            <!-- Synth√®se Page -->
            <div id="synthese" class="page hidden">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-700">Tableau de Synth√®se</h2>
                <div class="mt-4 overflow-x-auto">
                    <table class="w-full text-sm text-left shadow-md rounded-lg">
                        <thead class="bg-gray-700 text-white">
                            <tr>
                                <th class="p-3">Classe</th>
                                <th class="p-3">M√©canisme Principal</th>
                                <th class="p-3">Exemple Cl√©</th>
                                <th class="p-3">Vigilance Majeure</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-800">
                            <!-- COULEUR DU TABLEAU MODIFI√âE (sky- √† rose-) -->
                            <tr class="bg-rose-50 border-b"><td class="p-3 font-semibold">Classe I</td><td class="p-3">Blocage canaux Na+</td><td class="p-3">Fl√©ca√Ønide (Fleca√Øne¬Æ)</td><td class="p-3">Effet pro-arythmog√®ne</td></tr>
                            <tr class="bg-purple-50 border-b"><td class="p-3 font-semibold">Classe II</td><td class="p-3">B√™ta-bloquant</td><td class="p-3">M√©toprolol</td><td class="p-3">Ne jamais arr√™ter brutalement, CI (asthme, BAV)</td></tr>
                            <tr class="bg-red-50 border-b"><td class="p-3 font-semibold">Classe III</td><td class="p-3">Blocage canaux K+</td><td class="p-3">Amiodarone (Cordarone¬Æ)</td><td class="p-3">Toxicit√© multiple (thyro√Øde, poumon, peau), torsades de pointes</td></tr>
                            <tr class="bg-green-50 border-b"><td class="p-3 font-semibold">Classe IV</td><td class="p-3">Blocage canaux Ca2+</td><td class="p-3">V√©rapamil (Isoptine¬Æ)</td><td class="p-3">Bradycardie, BAV, constipation</td></tr>
                            <tr class="bg-amber-50"><td class="p-3 font-semibold">Digitaliques</td><td class="p-3">Inotrope +, Chronotrope -</td><td class="p-3">Digoxine</td><td class="p-3">Marge th√©rapeutique √©troite, surveillance kali√©mie & digoxin√©mie</td></tr>
                        </tbody>
                    </table>
                </div>
                 <div class="bg-slate-50 p-4 rounded-lg mt-8">
                        <h3 class="font-semibold text-slate-800 mb-2">üìä Comparaison des Classes d'Anti-arythmiques</h3>
                        <div class="flex justify-center items-center">
                            <div class="w-full md:w-3/4 lg:w-1/2">
                                <canvas id="aarChart"></canvas>
                            </div>
                        </div>
                    </div>
            </div>

        </main>

        <!-- Footer -->
        <footer id="footer" class="bg-slate-800 text-white p-4 md:p-6 mt-auto rounded-b-xl shadow-inner">
            <div class="max-w-6xl mx-auto flex items-center justify-center md:justify-end text-center">
                <p class="font-bold text-slate-300 text-xs sm:text-sm">
                    <!-- COULEUR DU FOOTER MODIFI√âE (sky-400 √† red-500) pour plus d'harmonie -->
                    Lucas S√©raudie - <span class="bg-gradient-to-r from-red-500 via-rose-500 to-pink-500 bg-clip-text text-transparent">Lucas S√©raudie</span> - 2025
                </p>
            </div>
        </footer>

    </div>

    <script>
        const quizData = [
            { 
                question: "Quelle action infirmi√®re est PRIORITAIRE avant l'administration orale d'un B√™ta-bloquant (Classe II) ?", 
                options: ["V√©rifier la derni√®re selle du patient", "Prendre la glyc√©mie capillaire", "Contr√¥ler la fr√©quence cardiaque et la tension art√©rielle", "V√©rifier la couleur des urines"], 
                correct: 2, 
                feedback: "Les B√™ta-bloquants sont bradycardisants et hypotenseurs. L'infirmier(√®re) doit toujours v√©rifier que la fr√©quence cardiaque est sup√©rieure √† 50 battements/min et la TA est acceptable avant l'administration." 
            },
            { 
                question: "Un patient sous Amiodarone (Cordarone¬Æ, Classe III) se plaint d'une photosensibilit√© importante. Quel conseil infirmier doit-on lui donner ?", 
                options: ["Arr√™ter imm√©diatement le traitement", "Prendre l'Amiodarone le soir au coucher", "Utiliser une protection solaire importante", "Boire plus d'eau pour √©liminer le produit"], 
                correct: 2, 
                feedback: "L'Amiodarone est tr√®s photosensibilisante et expose √† des br√ªlures graves. La protection solaire doit √™tre rigoureuse et maintenue pendant plusieurs mois apr√®s l'arr√™t du traitement." 
            },
            { 
                question: "Quel r√©sultat biologique (ionogramme) majore le risque de toxicit√© des digitaliques et des anti-arythmiques de Classe Ia et III (pro-arythmog√®nes) ?", 
                options: ["Hypernatr√©mie", "Hypokali√©mie", "Hypercalc√©mie", "Hypermagn√©s√©mie"], 
                correct: 1, 
                feedback: "L'hypokali√©mie (taux de potassium bas) potentialise l'effet de ces m√©dicaments et augmente significativement le risque d'arythmies graves, notamment les torsades de pointes." 
            },
            { 
                question: "Un patient sous B√™ta-bloquant doit subir une intervention chirurgicale. Quelle est l'attitude recommand√©e par rapport au traitement dans la majorit√© des cas ?", 
                options: ["L'arr√™ter brutalement 48h avant l'intervention", "Le remplacer par une dose plus faible d'un inhibiteur calcique", "Le maintenir jusqu'√† l'intervention", "L'arr√™ter progressivement sur une semaine"], 
                correct: 2, 
                feedback: "Il est crucial de ne pas interrompre brutalement un B√™ta-bloquant pour √©viter l'effet rebond. Le traitement est g√©n√©ralement maintenu jusqu'√† l'intervention, en √©troite collaboration avec l'√©quipe chirurgicale et l'anesth√©siste." 
            },
            { 
                question: "Quelle intervention infirmi√®re est associ√©e √† la pr√©vention des ≈ìd√®mes des membres inf√©rieurs chez un patient sous inhibiteur calcique (Classe IV, comme le Diltiazem) ?", 
                options: ["Limitation des apports en sel", "√âl√©vation des jambes et port de bas de contention si prescrits", "Administration de diur√©tiques m√™me sans prescription", "Massage √©nergique des jambes"], 
                correct: 1, 
                feedback: "Les ≈ìd√®mes sont li√©s √† la vasodilatation art√©rielle p√©riph√©rique. L'√©l√©vation des membres et le port de bas de contention (si prescrits) sont des mesures physiques adapt√©es pour faciliter le retour veineux." 
            },
            { 
                question: "Un patient sous B√™ta-bloquant se plaint de palpitations et d'une fatigue inhabituelle. Quelle complication cardiaque majeure doit-on redouter en priorit√© ?", 
                options: ["Une hypotension art√©rielle s√©v√®re", "Une insuffisance cardiaque ou une bradycardie excessive", "Une hypokali√©mie", "Un trouble de la coagulation"], 
                correct: 1, 
                feedback: "Les B√™ta-bloquants r√©duisent la contractilit√© du c≈ìur (inotropes n√©gatifs). La fatigue, la dyspn√©e et les palpitations peuvent √™tre des signes d'insuffisance cardiaque ou d'une bradycardie mal tol√©r√©e." 
            },
            { 
                question: "Lorsqu'un patient sous Digoxine signale une 'vision de halos color√©s' (dyschromatopsie), quelle est l'action infirmi√®re IMM√âDIATE ?", 
                options: ["Rassurer le patient, c'est un effet secondaire normal", "Administrer un collyre sur prescription", "Alerter le m√©decin, cela signe une intoxication digitalique", "Doubler la dose de Digoxine pour am√©liorer l'efficacit√©, sur prescription"], 
                correct: 2, 
                feedback: "La dyschromatopsie est un signe classique et tardif d'intoxication digitalique. L'infirmier(√®re) doit alerter le m√©decin pour un √©ventuel dosage de la digoxin√©mie et un ajustement/arr√™t du traitement." 
            },
            { 
                question: "Un patient asthmatique pr√©sente une arythmie n√©cessitant un traitement. Quel anti-arythmique de Classe II est strictement contre-indiqu√© chez ce patient ?", 
                options: ["V√©rapamil", "Digoxine", "M√©toprolol", "Fl√©ca√Ønide"], 
                correct: 2, 
                feedback: "Le M√©toprolol (et les autres B√™ta-bloquants) est contre-indiqu√© chez l'asthmatique car il peut provoquer un bronchospasme par blocage des r√©cepteurs $\\beta_2$ bronchiques." 
            },
            { 
                question: "Quelle est la signification de la R√®gle des 3R des digitaliques ?", 
                options: ["R√©gularise, R√©duit, Remplace", "Ralenti, Rigidifie, Retourne", "Remplace, Retourne, Ralenti", "R√©gularise, Renforce, Ralenti"], 
                correct: 3, 
                feedback: "Renforce : Augmente la force de contraction du c≈ìur (inotropes positifs). Ralentit : Diminue la fr√©quence cardiaque (chronotropes n√©gatifs). R√©gularise : Ralentit la conduction dans le n≈ìud auriculo-ventriculaire." 
            }
        ];
        // --- Navigation Logic ---
        const pages = document.querySelectorAll('.page');
        const navButtons = document.querySelectorAll('.nav-btn');

        function showPage(pageId) {
            // 1. Masquer toutes les pages
            pages.forEach(page => page.classList.add('hidden'));
            
            // 2. Afficher la page active
            const activePage = document.getElementById(pageId);
            if (activePage) activePage.classList.remove('hidden');
            
            const gradients = {
                classe1: ['from-red-500', 'to-rose-600'],
                classe2: ['from-purple-500', 'to-indigo-600'],
                classe3: ['from-red-500', 'to-orange-500'],
                classe4: ['from-green-500', 'to-emerald-600'],
                digitaliques: ['from-amber-500', 'to-yellow-500'],
                quiz: ['from-slate-500', 'to-gray-700'],
                synthese: ['from-gray-400', 'to-gray-600'],
            };

            const allGradientClasses = Object.values(gradients).flat();

            navButtons.forEach(btn => {
                const btnPageId = btn.getAttribute('onclick').match(/'([^']+)'/)[1];
                
                // 3. Retirer TOUS les styles actifs pr√©c√©dents de TOUS les boutons
                btn.classList.remove('bg-gradient-to-r', 'text-white', 'shadow-md');
                allGradientClasses.forEach(gClass => btn.classList.remove(gClass));

                // Retirer les styles de hover sp√©cifiques (car ils masquent l'√©tat actif)
                btn.classList.remove('hover:bg-rose-100', 'hover:text-rose-800', 
                                    'hover:bg-purple-100', 'hover:text-purple-800',
                                    'hover:bg-red-100', 'hover:text-red-800',
                                    'hover:bg-green-100', 'hover:text-green-800',
                                    'hover:bg-amber-100', 'hover:text-amber-800',
                                    'hover:bg-slate-300', 'hover:text-slate-800',
                                    'hover:bg-gray-200', 'hover:text-gray-800');


                if (btnPageId === pageId) {
                    // 4. Appliquer les styles actifs au bouton s√©lectionn√©
                    btn.classList.add('bg-gradient-to-r', 'text-white', 'shadow-md', ...gradients[pageId]);
                    btn.classList.remove('text-slate-800');
                } else {
                    // 5. Appliquer les styles inactifs (hover) aux autres boutons
                    btn.classList.add('text-slate-800');
                    // R√©appliquer les styles de hover sp√©cifiques qui ont √©t√© retir√©s √† l'√©tape 3.
                    if (btnPageId === 'classe1') btn.classList.add('hover:bg-rose-100', 'hover:text-rose-800');
                    if (btnPageId === 'classe2') btn.classList.add('hover:bg-purple-100', 'hover:text-purple-800');
                    if (btnPageId === 'classe3') btn.classList.add('hover:bg-red-100', 'hover:text-red-800');
                    if (btnPageId === 'classe4') btn.classList.add('hover:bg-green-100', 'hover:text-green-800');
                    if (btnPageId === 'digitaliques') btn.classList.add('hover:bg-amber-100', 'hover:text-amber-800');
                    if (btnPageId === 'quiz') btn.classList.add('hover:bg-slate-300', 'hover:text-slate-800');
                    if (btnPageId === 'synthese') btn.classList.add('hover:bg-gray-200', 'hover:text-gray-800');
                }
            });
            window.scrollTo(0, 0);
        }

        // --- Chart Logic ---
        function createAARChart() {
            const chartData = {
                labels: ['Ralentissement FC', 'Effet Inotrope', 'Ralentissement Conduction AV', 'Risque Pro-arythmog√®ne', 'Effets Extra-Cardiaques'],
                datasets: [
                    // MODIFICATION DE LA COULEUR DU GRAPHIQUE CLASSE I
                    { label: 'Classe I (Fl√©ca√Ønide)', data: [3, 2, 5, 5, 1], borderColor: 'rgb(244, 63, 94)', backgroundColor: 'rgba(244, 63, 94, 0.2)' }, // rose-500
                    { label: 'Classe II (BB)', data: [5, 2, 4, 2, 4], borderColor: 'rgb(139, 92, 246)', backgroundColor: 'rgba(139, 92, 246, 0.2)' },
                    { label: 'Classe III (Amiodarone)', data: [4, 1, 3, 4, 5], borderColor: 'rgb(239, 68, 68)', backgroundColor: 'rgba(239, 68, 68, 0.2)' },
                    { label: 'Classe IV (V√©rapamil)', data: [4, 2, 5, 2, 3], borderColor: 'rgb(34, 197, 94)', backgroundColor: 'rgba(34, 197, 94, 0.2)' },
                    { label: 'Digitaliques (Digoxine)', data: [5, 5, 4, 3, 4], borderColor: 'rgb(245, 158, 11)', backgroundColor: 'rgba(245, 158, 11, 0.2)' }
                ]
            };
            const chartOptions = { 
                scales: { 
                    r: { 
                        suggestedMin: 0, 
                        suggestedMax: 5, 
                        ticks: { stepSize: 1 }, 
                        pointLabels: { font: { size: 10 } } 
                    } 
                }, 
                plugins: { 
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.r !== null) {
                                    label += context.parsed.r + '/5';
                                }
                                return label;
                            }
                        }
                    }
                } 
            };
            const canvas = document.getElementById('aarChart');
            if(canvas && !canvas.chart) {
                canvas.chart = new Chart(canvas.getContext('2d'), { type: 'radar', data: chartData, options: chartOptions });
            }
        }
        
        // --- Dynamic Top Position for Navbar ---
        function setNavbarPosition() {
            const header = document.getElementById('header');
            const navbar = document.getElementById('navbar');
            if (header && navbar) {
                navbar.style.top = `${header.offsetHeight}px`;
            }
        }

        // --- Quiz Logic ---
        function renderQuiz() {
            const container = document.getElementById('qcm-container');
            if (!container) return;
            container.innerHTML = '';
            quizData.forEach((item, index) => {
                const optionsHtml = item.options.map((option, optionIndex) => 
                    `<button class="qcm-option w-full text-left p-4 rounded-xl bg-white border-2 border-slate-200 hover:bg-slate-100 hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200" data-index="${optionIndex}">${option}</button>`
                ).join('');

                container.innerHTML += `
                    <div class="qcm-question bg-slate-100/70 border border-slate-200/80 p-6 rounded-2xl shadow-lg" data-question-index="${index}">
                        <p class="font-semibold text-lg text-slate-800 mb-4">${index + 1}. ${item.question}</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">${optionsHtml}</div>
                        <div class="qcm-feedback mt-4 text-sm font-medium"></div>
                    </div>`;
            });
            document.getElementById('quiz-score').textContent = `Pr√™t ? 0 / ${quizData.length}`;
            const resetButton = document.getElementById('reset-button');
            resetButton.classList.add('opacity-0', 'pointer-events-none');
        }

        function setupQuizListeners() {
            const container = document.getElementById('qcm-container');
            if (!container) return;
            container.addEventListener('click', (event) => {
                if (!event.target.classList.contains('qcm-option')) return;
                
                const optionButton = event.target;
                const questionEl = optionButton.closest('.qcm-question');
                if (!questionEl || questionEl.classList.contains('answered')) return;
                
                questionEl.classList.add('answered');
                const questionIndex = parseInt(questionEl.dataset.questionIndex, 10);
                const questionData = quizData[questionIndex];
                const selectedIndex = parseInt(optionButton.dataset.index, 10);
                const isCorrect = selectedIndex === questionData.correct;
                const feedbackEl = questionEl.querySelector('.qcm-feedback');

                if (isCorrect) {
                    optionButton.classList.add('correct');
                    feedbackEl.innerHTML = `<p class="text-emerald-600">üéâ Bravo ! ${questionData.feedback || ''}</p>`;
                } else {
                    optionButton.classList.add('incorrect');
                    const correctButton = questionEl.querySelector(`[data-index="${questionData.correct}"]`);
                    correctButton.classList.add('correct');
                    feedbackEl.innerHTML = `<p class="text-red-600">Dommage. ${questionData.feedback || ''}</p>`;
                }
                
                questionEl.querySelectorAll('.qcm-option').forEach(btn => btn.disabled = true);
                updateScore();
            });
        }

        function updateScore() {
            const totalQuestions = quizData.length;
            // D√âBUT DE LA CORRECTION : La m√©thode de comptage pr√©c√©dente comptait les r√©ponses correctes non s√©lectionn√©es
            // La bonne m√©thode est de compter les questions marqu√©es 'answered' qui n'ont AUCUNE option 'incorrect'
            let correctAnswers = 0; 
            document.querySelectorAll('.qcm-question.answered').forEach(questionEl => {
                if (!questionEl.querySelector('.qcm-option.incorrect')) {
                    correctAnswers++;
                }
            });
            // FIN DE LA CORRECTION
            const answeredCount = document.querySelectorAll('.qcm-question.answered').length;

            const scoreEl = document.getElementById('quiz-score');
            scoreEl.textContent = `Votre score : ${correctAnswers} / ${answeredCount}`;

            if (answeredCount === totalQuestions) {
                scoreEl.textContent = `Score final : ${correctAnswers} / ${totalQuestions}`;
                const percentage = (correctAnswers / totalQuestions) * 100;
                if (percentage >= 80) {
                    scoreEl.textContent += " - Excellent travail ! üéâ";
                } else if (percentage >= 50) {
                    scoreEl.textContent += " - Pas mal, continuez √† r√©viser ! üí™";
                } else {
                    scoreEl.textContent += " - Encore un effort ! üìö";
                }
                document.getElementById('reset-button').classList.remove('opacity-0', 'pointer-events-none');
            }
        }

        function resetQuiz() {
            renderQuiz();
        }
        
        // --- Initial Load ---
        window.onload = () => {
            showPage('classe1'); // Affiche la premi√®re page au chargement
            setNavbarPosition();
            createAARChart();
            renderQuiz();
            setupQuizListeners();
        };

        window.onresize = setNavbarPosition;

    </script>
</body>
</html>

